<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style2.css">
    <script src="/socket.io/socket.io.js"></script>
    <title>Draw&Drive-Login</title>
</head>
<body>
   <div class="con">
    <!-- form with 3 inputs, username,password , game code and a submit button -->
        <h1 class="menuHeader"></h1>
    <div class="formCon" >
        <input class="FormInput" type="text" id="gamecode" name="gamecode" placeholder="game code" required>
        <button class="FormBtn" >
            Enter
            </button>
        <button class="OutBtn" >
            Log out
            </button>
    </div>
   </div> 
   <script>
    const gamecode = document.getElementById('gamecode');
    const btn = document.querySelector('.FormBtn');
    const outbtn = document.querySelector('.OutBtn');

    const api_gamecode_request = () =>{
        console.log(gamecode.value);
        fetch('http://localhost:3000/games/game_code', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({gamecode: gamecode.value}),
        })
        .then(response => response.json())
        .then(data => {
            console.log('Success:', data);
            //open socket
            //window.location.href = 'anotheTest - Copy.html';
        })
        .catch((error) => {
            console.error('Error:', error);
        });


    btn.addEventListener('click', (e) => {
        e.preventDefault();
        if(gamecode.value === ''){
            return;
        }else{
            api_gamecode_request();
        }
    })
}

    //at log out, back to menu2.html
    outbtn.addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = 'menu2.html';
    })

    //say hello
    const socket = io('http://localhost:3000');
    socket.on('connect', () => {
        console.log("hello");
    });

    
   </script>
</body>
</html>