<!DOCTYPE html>
<html>
<head>
  <title>Draw&Drive</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <style>
        /* img {
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -50px;
            margin-left: -50px;
        } */
        body {
        background-size: cover;
        background-image: url("Images/backgroundmenu.png");
        background-color: #cccccc;
       }
    </style>
</head>
<body >

    <img src="Images/reverse.png" id="reverse" style="position: absolute;
    max-width: 20%;
    height: auto;
    top: 50%;
    left: 10%;
    margin-top: -50px;
    margin-left: -50px;">
    <img src="Images/steeringWheel.png" style="position: absolute;
    max-width: 30%;
    height: auto;
    top: 50%;
    left: 35%;
    margin-top: -50px;
    margin-left: -50px; " >
    <img src="Images/pedal.png" id="pedal" style="position: absolute;
    max-width: 20%;
    height: auto;
    top: 50%;
    left: 70%;
    margin-top: -50px;
    margin-left: -50px;">



  <h1 style="color:white;">Gyroscope Data</h1>

  <div id="gyro-data" style="color:white;">
    <p>Gyroscope data:</p>
    <ul>
      <li>Rotation rate alpha: <span id="alpha-value"></span></li>
      <li>Rotation rate beta: <span id="beta-value"></span></li>
      <li>Rotation rate gamma: <span id="gamma-value"></span></li>
    </ul>
  </div>
    <div id="pedal_data" style="color:white;"></div>
    <div id="reverse_data" style="color:white;"></div>


  <script>
    var pedal_pressed = false;
    var reverse_pressed = false;



    //--------------------Gyro---------------------------------------------------------
    function startGyroscope() {
      if ('Gyroscope' in window) {
        // Create a new gyroscope sensor instance
        const gyroscope = new Gyroscope();
        gyroscope.frequency = 100;
        // Handle gyroscope reading changes
        gyroscope.addEventListener('reading', handleGyroscopeReading);

        // Start the gyroscope sensor
        gyroscope.start();
      } else {
        alert('Gyroscope is not supported on this device');
      }
    }

    function handleGyroscopeReading(event) {
      // Get the gyroscope readings
      const { x, y, z } = event.target;

      // Display the gyroscope data on the webpage
      document.getElementById('alpha-value').textContent = x.toFixed(2);
      document.getElementById('beta-value').textContent = y.toFixed(2);
      document.getElementById('gamma-value').textContent = z.toFixed(2);
    }
    // Request gyroscope permission and start using gyroscope data
    function requestGyroscopePermission() {
      navigator.permissions.query({ name: 'gyroscope' })
        .then((result) => {
          if (result.state === 'granted') {
            startGyroscope();
          } else if (result.state === 'prompt') {
            result.onchange = () => {
              if (result.state === 'granted') {
                startGyroscope();
              }
            };
          } else {
            alert('Gyroscope access denied');
          }
        })
        .catch((error) => {
          console.error('Error requesting gyroscope access:', error);
        });
    }

    // Call the permission request function when the page loads
    window.addEventListener('load', requestGyroscopePermission);
    //---------------------------------------------------------------------------------

    //--------------------Pedal---------------------------------------------------------
    function pedal_press() {
        event.preventDefault();
        document.getElementById("pedal_data").innerHTML = "Drive";//Pedal pressed
        pedal_pressed = true;
    }
    function pedal_release() {
        event.preventDefault();
        document.getElementById("pedal_data").innerHTML = "Stop"; //Pedal released
        pedal_pressed = false;
    }
    document.getElementById("pedal").addEventListener("touchstart", pedal_press);
    document.getElementById("pedal").addEventListener("touchend", pedal_release);
    //---------------------------------------------------------------------------------
    //--------------------Reverse---------------------------------------------------------
    function reverse_press() {
        event.preventDefault();
        document.getElementById("reverse_data").innerHTML = "Mode: Reverse"; //Reverse pressed
        reverse_pressed = true;
    }
    function reverse_release() {
        event.preventDefault();
        document.getElementById("reverse_data").innerHTML = "Mode: Forward";//Reverse released
        reverse_pressed = false;
    }
    document.getElementById("reverse").addEventListener("touchstart", reverse_press);
    document.getElementById("reverse").addEventListener("touchend", reverse_release);
    //---------------------------------------------------------------------------------


  </script>
</body>
</html>
